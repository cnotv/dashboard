import { Meta, Canvas, Story, ArgsTable, Source } from '@storybook/addon-docs';
import ArrayList from '@shell/components/form/ArrayList';
import { _EDIT, _VIEW } from "@shell/config/query-params";

<Meta 
  title="Components/ArrayList"
  component={ArrayList}
/>

export const Template = (args, { argTypes }) => ({
  components: { ArrayList },
  props:      Object.keys(argTypes),
  template:   '<ArrayList v-bind="$props" />',
})

# ArrayList
The ArrayList is used to input a list of strings. The list is of variable length.

## With list
<Canvas>
  <Story
    name="With list"
    args={{
       value: ["First value", "Second value", "Third value"],
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## No list

This will show only the button to add values.

<Canvas>
  <Story
    name="No list"
    args={{}}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Multiline value

Allow to use multiline values for the list. This will prevent generating multiple rows for each line.

<Canvas>
  <Story
    name="Multiline value"
    args={{
      value: [`Multiline
value
example
      `],
       valueMultiline: true,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Empty Value

<Canvas>
  <Story
    name="Empty Value"
    args={{
       initialEmptyRow: true,
       addLabel: "Add",
       removeLabel: "Remove"
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Title and tip

Add cusom title and tip. The second requires a title to be shown.

<Canvas>
  <Story
    name="Title and tip"
    args={{
       title: 'This is a title',
       protip: 'This is a tip',
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Input label and placeholder

Add a label to the input. Custom value is set with `valueLabel`.

<Canvas>
  <Story
    name="Input label and placeholder"
    args={{
      value: [''],
      valueLabel: 'Custom label value',
      valuePlaceholder: 'Custom placeholder',
      showHeader: true,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Read-only Mode
<Canvas>
  <Story
    name="Disabled"
    args={{
      value: ['string 1', 'string 2'],
      mode: _VIEW,
      addLabel: "Add",
      removeLabel: "Remove"
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Disable add/remove buttons
<Canvas>
  <Story
    name="Disable add/remove buttons"
    args={{
      addAllowed: false,
      removeAllowed: false,
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Custom buttons text
<Canvas>
  <Story
    name="Custom buttons text"
    args={{
       addLabel: "Custom add",
       removeLabel: "Custom remove"
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Default add value

Allow to automatically add default values on new rows.

<Canvas>
  <Story
    name="Default add value"
    args={{
       defaultAddValue: "Default value",
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Loading status

<Canvas>
  <Story
    name="Loading status"
    args={{
      loading: true,
       value: ["Existing value"],
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Validation

<Canvas>
  <Story
    name="Validation"
    args={{
      rules: [(value) => value !== 'Change for error' ? 'Please add at least one value' : void 0],
      value: ["Change for error", "Already error"],
    }}>
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Import 
<Source
  language='ts'
  code={`
     import ArrayList from '@shell/components/form/ArrayList';
  `}
/>


### Props table

<ArgsTable of={ArrayList} />